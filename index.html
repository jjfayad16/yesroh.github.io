<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Faro Food - Cadê a comida!?</title>

  <!-- CSS  -->
  <link href="./css/icon.css?family=Material+Icons" rel="stylesheet">
  <link href="./css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="./css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-81003851-1', 'auto');
  ga('send', 'pageview');

</script>
<body>
  <nav class="light-red lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="" class="brand-logo"><img class="circle" alt="" width="105px" style="margin-left:-40px; margin-top:10px;" src="images/farofood.png"></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="">Lista de foodtrucks</a></li>
		<li><a href="#!">Promoções</a></li>
		<li><a href="#!">Eventos</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="">Lista de foodtrucks</a></li>
		<li><a href="#!">Promoções</a></li>
		<li><a href="#!">Eventos</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container" id="largura">
		<div class="mostra-mapa">
			<br><h5>Responda o formulário clicando <a href="https://goo.gl/ON0cVt">aqui</a> que em seguida lhe enviaremos o cupom!</h5>
			<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcHX1_YtKVqW-xw8QzOiRncNOVwpJPow0&callback=initMap"></script>
			<section>
				<article>
					<p><span id="status">Por favor aguarde enquanto nós tentamos localizar você...</span></p>
				</article>
			 </section>
		</div>

	<!-- Dropdown Trigger -->
	<div class="row mostra-lista">
		<div class="col s12 m12 x12">
	  <a class='dropdown-button btn right' href='#' data-activates='dropdown1'><i class="material-icons">import_export</i> Ordernar por</a>
	  </div>
	</div>

  <!-- Dropdown Structure -->
  <ul id='dropdown1' class='dropdown-content mostra-lista'>
    <li><a href="#!">distância</a></li>
    <li><a href="#!">menor preço</a></li>
    <li class="divider"></li>
    <li><a href="#!">maior preço</a></li>
	<li><a href="#!">melhor avaliação</a></li>
  </ul>
    <ul class="collection mostra-lista">

            <li class="collection-item avatar" style="cursor:pointer;" onclick="javascript:carregaMapa(-15.8439020,-48.0005460)">
                    <img class="circle" alt="" src="images/gutruck.jpg">
                    <span class="title">Gutruck StreetFood</span>
                    <p>
                            Dia 29/10/2016 de 18:00 as 23:00<br>
                            Categoria: Hamburger
                    </p>
                            <a class="secondary-content" href="#!">
                                    <i class="material-icons">grade</i>
                            </a>
            </li>
            <li class="collection-item avatar" style="cursor:pointer;" onclick="javascript:carregaMapa(-15.8439020,-48.0005460)">
                    <img class="circle" alt="" src="images/como.jpg">
                    <span class="title">Como FoodTruck</span>
                    <p>
                            Dia 29/10/2016 de 18:00 as 23:00<br>
                            Categoria: Hamburger
                    </p>
                            <a class="secondary-content" href="#!">
                                    <i class="material-icons">grade</i>
                            </a>
            </li>
            <li class="collection-item avatar" style="cursor:pointer;" onclick="javascript:carregaMapa(-15.783781,-47.914833)">
                    <img class="circle" alt="" src="images/elperronegro.jpeg">
                    <span class="title">El Perro Negro</span>
                    <p>
                            Dia 30/10/2016 de 17:00 as 22:00<br>
                            Categoria: Hot Dog
                    </p>
                            <a class="secondary-content" href="#!">
                                    <i class="material-icons">grade</i>
                            </a>
            </li>

            <li class="collection-item avatar" style="cursor:pointer;" onclick="javascript:carregaMapa(-15.8602352,-48.0718304,'evento1')">
              <img class="circle" alt="" src="images/x.jpg">
              <span class="title">Food Parking</span>
              <p>
                Dia 30/10/2016<br>
                Categoria: Evento
              </p>
                <a class="secondary-content" href="#!">
                  <i class="material-icons">grade</i>
                </a>
            </li>

	</ul>
  
      <div class="row mostra-evento" id="evento1">
        <div class="col s3 m4 s6">
          <div class="card">
            <div class="card-image">
              <img src="images/como.jpg">
              <span class="card-title">Como FoodTruck</span>
            </div>
            <div class="card-content">
              <p>COMO FOOD TRUCK .. Hamburgueria móvel ..
                #comofoodtruck</p>
            </div>
            <!-- <div class="card-action">
              <a href="#">This is a link</a>
            </div> -->
          </div>
        </div>
          
          
          
          
      </div>
            
    </div>
  </div>



  </div>

  <footer class="page-footer orange">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Faro Food</h5>
          <p class="grey-text text-lighten-4">Localize um FoodTruck mais perto de você.</p>


        </div>

      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="orange-text text-lighten-3" href="http://materializecss.com">Faro Food</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="./js/jquery-2.1.1.min.js"></script>
  <script src="./js/materialize.js"></script>
  <script src="./js/init.js"></script>

  <script>
  $(document).ready(function(){
	$('.mostra-mapa').hide();
        $('.mostra-evento').hide();
  });

	//function success(position) {

	function carregaMapa(latitude,longitude, evento) {
	$('.mostra-lista').hide();
	$('.mostra-mapa').show();
        if (evento != undefined)
        $('#'+evento).show();
    var s = document.querySelector('#status');

    if (s.className == 'success') {
        return;
    }

    s.innerHTML = "Foodtruck farejado!";
    s.className = 'success';


    var largura = $('#largura').width();
    var altura = $(window).height()*0.5;
    
    //alert(largura);
    
    var mapcanvas = document.createElement('div');
        mapcanvas.id = 'mapcanvas';
        mapcanvas.style.height = altura+'px';
        mapcanvas.style.width = largura+'px';
        
   

    document.querySelector('article').appendChild(mapcanvas);

    //var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	var latlng = new google.maps.LatLng(latitude,longitude);
    var myOptions = {
        zoom: 15,
        center: latlng,
        mapTypeControl: false,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title:"Tenha um bom apetite!"
    });

}

function error(msg) {
    var s = document.querySelector('#status');
        s.innerHTML = typeof msg == 'string' ? msg : "falhou";
        s.className = 'fail';
}

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success, error);
} else {
    error('Seu navegador não suporta <b style="color:black;background-color:#ffff66">Geolocalização</b>!');
}
  </script>

  </body>
</html>
